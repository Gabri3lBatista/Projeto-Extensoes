{% extends 'partials/base.html' %}

{% load static %}

<title>{% block titulo %} Listagem de Cadastros {% endblock %} </title>

        {% block conteudo %}
        <div class="d-flex bd-highlight mt-2 mb-3">
            <div class="p-2 bd-highlight">
                <h3>Listagem de Cadastros</h3>
            </div>
            <div class="ml-auto p-2 bd-highlight">
                <a class="btn btn-primary" href="{% url 'cadastro' %}">
                    <i class="fas fa-plus"></i>
                    Novo Cadastro
                </a>
            </div>
          </div>

            <div class="bg-white p-4 rounded">
                <table class="table table-bordered table-hover align-middle" id="dataListagens" width="100%" cellspacing="0">
                    
                    <thead class="" >                        
                        <tr class="table-secondary text-dark">
                            <th class="text-center ">Grupo</th>
                            <th class="text-center">Clientes</th>
                            <th class="text-center">Projeto</th>
                            <th class="text-center">Número de <br> Participantes</th>
                            <th class="text-center">Descrição</th>
                            <th class="text-center">Tutorial</th>
                            <th class="text-center">Data Inicio</th>                                   
                            <th class="text-center">Ver</th>                   
                            <th class="text-center">Ações</th>
                        </tr>
                    </thead>
                    <tbody>    
                        {% for item in object_list %}    
                        <tr>
                            <td scope="row " class="text-center align-middle">{{ item.grupo }}</td>
                            <td class="text-center align-middle">{{ item.cliente }}</td>
                            <td class="text-center align-middle">{{ item.projeto }}</td>  
                            <td class="text-center align-middle">{{ item.n_de_part }}</td>
                            <td class="text-center align-middle">{{ item.descricao }}</td>
                            <td class="text-center align-middle">{{ item.tutorial }}</td>
                            <td class="align-middle">
                                {{ item.dataIni|date:"d/m/Y"|default:"----" }} <br>
                            </td>
                            <td class="text-center align-middle" >
                                <a href="{{ item.ver }}" class="btn btn-primary b" >
                                    Link
                                </a>
                            </td>
                            <td class="text-center  p-2 align-middle">       
                                     
                                <div class="d-flex flex-row bd-highlight">
                                    <div class=" pr-1 bd-highlight">
                                        <a href="#" class="element btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Sobre">
                                            <i class="fas fa-list-ul " ></i>
                                        </a>
                                    </div>
                                    <div class=" pr-1 bd-highlight">
                                        <a href="{% url 'update' item.pk %}" class=" element btn btn-warning" data-toggle="tooltip" data-placement="top" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                    </div>
                                    <div class=" pr-1 bd-highlight">
                                        <a href="{% url 'deletar' item.pk %}" class=" btn btn-danger" data-toggle="tooltip" data-placement="top" title="Excluir">
                                            <i class="fa fa-trash " aria-hidden="true"></i>
                                        </a> 
                                    </div>
                                </div>                            

                            </td>
                        </tr>
                                            
                        {% empty %}
                        
                            Nada foi registrado
                        
                        {% endfor %}
    
                    </tbody>
                </table>
            </div>

        {% endblock %}

        {% block afterjs %}
        <script>
          $("select").change(function() {
            $(this).parent().submit();
        })
        </script>
        <script>
            $(document).ready(function() {
                var table = $('#dataListagens').DataTable({
                    lengthChange: false,
                    buttons: ['copy', 'excel', 'pdf', 'colvis']
                });
                table.buttons().container()
                    .appendTo('#dataListagens_wrapper .col-md-6:eq(0)');
            });
        </script>
    {% endblock %}
 