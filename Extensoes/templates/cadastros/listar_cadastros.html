{% extends 'base.html' %}

{% load static %}

    {% block titulo %}
    <title>Listagem de Cadastros</title>
    {% endblock %}
        {% block conteudo %}
        <div class="d-flex bd-highlight mt-2 mb-3">
            <div class="p-2 bd-highlight">
                <h3>Listagem de Cadastros</h3>
            </div>
            <div class="ml-auto p-2 bd-highlight">
                <a class="btn btn-primary" href="{% url 'cadastro' %}">
                    <i class="fas fa-plus"></i>
                    Novo Cadastro
                </a>
            </div>
          </div>

            <div class="bg-white p-4 rounded">
                <table class="table table-bordered" id="dataListagens" width="100%" cellspacing="0">
                    
                    <thead class="text-dark" >                        
                        <tr>
                            <th>Grupo</th>
                            <th>Clientes</th>
                            <th>Projeto</th>
                            <th>Número de Participantes</th>
                            <th>Descrição</th>
                            <th>Tutorial</th>
                            <th class="text-center" >Ver</th>                        
                            <th class="text-center" >Ações</th>
                        </tr>
                    </thead>
                    <tbody>    
                        {% for item in object_list %}    
                        <tr>
                            <td scope="row">{{ item.grupo }}</td>
                            <td>{{ item.projeto }}</td>
                            <td>{{ item.cliente }}</td>
                            <td>{{ item.n_de_part }}</td>
                            <td>{{ item.descricao }}</td>
                            <td>{{ item.tutorial }}</td>
                            <td class="text-center" >
                                <a href="{{ item.ver }}" class="btn btn-primary " >
                                    Link
                                </a>
                            </td>
                            <td class="text-center" >

                                <a href="#" class="btn btn-secondary mb-1"><i class="fas fa-list-ul "></i></a>

                                <a href="{% url 'update' item.pk %}" class="btn btn-warning mb-1"><i class="fas fa-edit "></i></a>

                                <a href="{% url 'deletar' item.pk %}" class="btn btn-danger mb-1"><i class="fa fa-trash " aria-hidden="true"></i></a> 
                                 
                            </td>
                        </tr>
                                            
                        {% empty %}
                        
                            Nada foi registrado
                        
                        {% endfor %}
    
                    </tbody>
                </table>
            </div>

        {% endblock %}

        {% block afterjs %}
            <script>
              $("select").change(function() {
                $(this).parent().submit();
            })
            </script>
            <script>
                $(document).ready(function() {
                    var table = $('#dataListagens').DataTable({
                        lengthChange: false,
                        "scrollX": true, "scrollCollapse": true,

                        buttons: ['copy', 'excel', 'pdf', 'colvis']
                    });
                    
                });
            </script>
        {% endblock %}
 